---
title: "MAPAS"
author: "Yuri"
format: html

execute: 
  freeze: auto
  cache: true
  warning: false
---

## Como confeccionar mapas

Principais pacotes:

```{r}
library(tidyverse)
library(readxl)
library(readr)
library(ggplot2)
library(r4pde) 
library(rnaturalearth)
library(rnaturalearthhires) ##advindo do github utilizando remotes::install_github (pacote)
```

Dados Para plotagem do mapa de um determinado país:

```{r}
sbr <- RustSoybean

BRA <- ne_countries(country = "Brazil", 
                    returnclass = "sf")
ggplot(BRA) +
geom_sf(fill = "white")
```

Plotagem de estados:

```{r}
BRA <- ne_states(country = "Brazil", 
                    returnclass = "sf")
ggplot(BRA) +
geom_sf(color = "white",
          fill = "darkgreen") +
  theme_void()
```

Selecionando um estado:

```{r}
BRA <- ne_states(country = "Brazil", 
                    returnclass = "sf")
MG <- BRA |> filter(name_en == "Minas Gerais")
ggplot(BRA) +
geom_sf(color = "black",
          fill = "white") +
  geom_sf(data = MG, color = "black",
            fill = "green")
```

Para plotarmos pontos específicos no mapa, necessitamos das cordenadas (log . lat).

```{r}
BRA <- ne_states(country = "Brazil", 
                    returnclass = "sf")
MG <- BRA |> filter(name_en == "Minas Gerais")
ggplot(BRA) +
geom_sf(color = "black",
          fill = "white") +
  geom_point(data = sbr, aes(longitude, latitude), alpha = 0.5)
```

íPara separarmos os pontos de acordo com características especificas (no caso em questão os anos de amostragem):

```{r}
sbr2 <- sbr |>
  separate(planting, into = 
             c("year", "month", "day"), sep = "-", remove = FALSE)

BRA <- ne_states(country = "Brazil", 
                    returnclass = "sf")
MG <- BRA |> filter(name_en == "Minas Gerais")
ggplot(BRA) +
geom_sf(color = "black",
          fill = "white") +
  geom_point(data = sbr2,
             aes(longitude, latitude, color = year), alpha = 0.5)+
  facet_wrap(~year)+
  theme_void()
```

Inserindo rosa dos ventos e escala:

```{r}
library(ggspatial)
ggplot(BRA) +
  annotation_north_arrow(location = "bl")+
  annotation_scale(location = "br")+
  geom_sf(color = "black",
          fill = "white") +
  geom_point(data = sbr2,
             aes(longitude, latitude, color = year, size = severity), alpha = 0.5)+
  labs(color = "Planting Year")+
  theme_minimal()+
  theme(legend.position = "right")
```
